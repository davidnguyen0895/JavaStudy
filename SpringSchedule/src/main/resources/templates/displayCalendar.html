<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<link href="/css/calendar.css" rel="stylesheet"></link>
<title>スケジュール管理</title>
</head>
<body>
	<!--～～～～～～～～～～ ホームページに戻るボタン～～～～～～～～～～-->
	<div>
		<a th:href="@{'/index'}"><button>ホームページに戻る</button></a>
		<!--～～～～～～～～～～ スケジュール新規登録ボタン～～～～～～～～～～-->
		<a href="createScheduleForm.html"
			th:href="@{'/schedule/showScheduleForm'}">
			<button>スケジュール新規登録</button>
		</a>
	</div>
	<!--～～～～～～～～～～ カレンダー表示 ～～～～～～～～～～-->
	<div th:object="${calendarInfo}">
		<p>
			<a href="displayCalendar.html"
				th:href="@{/displayCalendar/date(year=*{yearOfPrevMonth},
				month=*{monthOfPrevMonth})}"><button>&larr;先月</button></a>
			<a href="displayCalendar.html"
				th:href="@{/displayCalendar/date(year=*{yearOfNextMonth},
				month=*{monthOfNextMonth})}"><button>来月&rarr;</button></a>
			<a href="displayCalendar.html"
				th:href="@{/displayCalendar/date(year=*{currentYear},
				month=*{currentMonth})}">
				<button>今月</button>
			</a><br> <span th:text="*{firstDayOfMonth.toString('yyyy年M月')}"></span><br>
		</p>
		<div>
		
		<span>ユーザ選択 : </span>
<!-- 		<form th:action="@{/selectUserSchedule}" th:method="get"> -->
			<select th:field="*{userList}" id="selectedUser">
				<option value="all">全員</option>
				<option th:each="user : ${calendarInfo.userList}" 
						th:value="${user.getId()}"
						th:utext="${user.getUser()}">
					</option>
			</select>
<!-- 			<button type="submit">Submit post</button>
			</form> -->
			
		</div>
		<table border=1 style="width: 100%">
			<tr>
				<th>日</th>
				<th>月</th>
				<th>火</th>
				<th>水</th>
				<th>木</th>
				<th>金</th>
				<th>土</th>
			</tr>
			<tr th:each="week : *{calendar}">
				<td th:each="day : ${week}">
				<th:block th:text="${day.getDay().getDayOfMonth()}"></th:block> 
				<img style="width: 40%" th:src="@{${day.getWeatherIconLink() != null ? day.getWeatherIconLink() : ''}}"/>
					<div th:each="schedule : ${day.getScheduleList()}">
						<a href="showScheduleDetail.html"
							th:href="@{/displayCalendar/schedule(id=${schedule.getId()})}"> 
							<!-- <img src="/images/calendar.png" /> -->
							<small th:text="${schedule.getUsername() != null ? schedule.getUsername() + ':' + 
							schedule.getSchedule().substring(0,3) + '...' : ''}"></small> 
						</a>
					</div>
					</td>
			</tr>
		</table>
	</div>
</body>
</html>